NAME			=	cub3d_server

SRCS			=	networking/server/server_bonus.c							\
					networking/server/manage_client_bonus.c						\
					networking/server/manage_client_input_bonus.c				\
					networking/server/req_actions/health_kit_bonus.c			\
					networking/server/req_actions/set_bonus.c					\
					networking/server/req_actions/shoot_bonus.c					\
					networking/utils/current_timestamp_bonus.c					\
					networking/utils/read_request_bonus.c						\
					networking/utils/socket_init_bonus.c						\
					utils/vector_bonus.c 										\

OBJS			=	$(addprefix ./.build/, $(SRCS:.c=.o))

OBJ_DIR			=	$(sort $(dir $(OBJS)))

LIBFT			=	../Libs/libft/libft.a

CC				=	cc

CFLAGS			=	-Werror -Iincludes -I$(dir $(LIBFT))


all : ${NAME}

./.build/%.o : ./srcs/%.c
	$(CC) -c $(CFLAGS) "$<" -o "$@"

$(LIBFT) :
	@make -C "$(dir $(LIBFT))"

$(OBJ_DIR):
	@mkdir -p $@

${NAME} : $(LIBFT) $(OBJ_DIR) ${OBJS}
	${CC} ${OBJS} -o ${NAME} ${CFLAGS} -L$(dir $(LIBFT)) -lft -lm -MD

clean:
	rm -rf ${OBJS}

fclean: clean
	rm -rf ${NAME}

re	: fclean all

-include $(OBJS:.o=.d)

.PHONY : libft re fclean all clean
